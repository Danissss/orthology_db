require 'test_helper'





# more information on testing see test.md
class SubmitSequenceControllerTest < ActionDispatch::IntegrationTest
  # test "the truth" do
  #   assert true
  # end

  # rails test test/models/article_test.rb:6 # run specific test and line
  test "testing SequenceSubmitter concern" do

  	fasta_array = ">8657036VS\nMGKFHLTLSRRDFMKSLGLAGAGLATVKVGTPVFHDLDEVISNENSNWRRPWWVKEREFDKPTVDVDWGI
  	YKRFDKFTYAPANARIAMFGQEAVMKANQDWNNLVAKRLQEDTAGFTIRDRAMDEGLCEEGINGGYPAPRTASLPQDLADMADPPIVLSKGRWEG
  	TPEENSRMVRCVLKLAGAGSVAFGVASEDKAEKFIYTHEHVWGDFKHYKIGDYDDIWEDEETRYHPHKCKYMITYTIPESEELLRRAPSNFAEATV
  	DQAYSESRVIFGRMTNFLWALGKYICGGDCSNAHSIHTATAAWTGLSECSRMHQQTISSEFGNIMRQFCIWTDLPLAPTPPIDMGIMRYCLTCKKCAD
  	TCPSGAISHEDPTWERAFAPYCQEGVYDYDFSHAKCSQFWKQSSWGCSMCTGSCPFGHKNYGTVHDVISATAAVTPIF
  	\n>8657042VS\nMEMNIYHSTISRRNFMKGLGLSGAALGAATASAPVFHDLDEMITSVPKSTTQHAWWVKERDYEDITTPV
  	DWTVWSRREALKNPMPPGFAGNYVPKEQARLQSFRDEIKRGITEKIPGATLRDWALSEAGRSNTTSSSWMGLDVKPPWLWGEASA
  	LPVEPWPEGAPKWESTPEDNLRTVQAAGHYFGTPQVGAMEINEHMIRMFDKDGFEHNYSESYEKPMMRFRSEWFEDIPVGFQDAN
  	QVKHIPKSCKWAVTYIAAKENALQMTYGMRTGDPQDPWYKRIFPLGYTTGEAYSKADYVKVQFMKFIKMLGYQTYYMGLAGGTSSN
  	SPAGVFSGLAEEARPALACSPYYGNAVRHIGIIVTDMPLSPTKPIDAGIVNFCKVCKKCAETCPSGAISMETEQQWEPACTGNNPGR
  	KTWYLDWFKCRPWGSPYYC"

  	uploading_result = submit_sequence_caller(fasta_array)


  	# {:header=>"8657036VS", :status=>"FAILED", :msg=>"Your sequence doesn't share 90% of representatives of the group at aa level."}
  	# {:header=>"8657042VS", :status=>"SUCCESS", :msg=>"Your sequence belongs 27"}

  	assert(uploading_result[0][:header], "8657036VS")
  	assert(uploading_result[0][:status], "FAILED")
  	assert(uploading_result[1][:header], "8657042VS")
  	assert(uploading_result[1][:status], "SUCCESS")


  end

  # ruby -I test test/controllers/submit_sequence_controller_test.rb -n test_validation_submission
  # rake test TEST=test/controllers/submit_sequence_controller_test.rb TESTOPTS="-n /validation_submission/"
  test "validation_submission" do
    puts "inside validation_submission"
    working_params = {"utf8"=>"âœ“", "authenticity_token"=>"I+ZydlaZU0G9WwwzKbrf7BP/lznIu47ZHrUEdpBwjOJTPemWCJde5Dk70YgH1bYpH5Hf+JZdyIxYbS/+li45ZQ==", "aa_sequence"=>">8657036VS | assession_no_1 | organism species | \r\nMGKFHLTLSRRDFMKSLGLAGAGLATVKVGTPVFHDLDEVISNENSNWRRPWWVKEREFDKPTVDVDWGIYKRFDKFTYAPANARIAMFGQEAVMKANQDWNNLVAKRLQEDTAGFTIRDRAMDEGLCEEGINGGYPAPRTASLPQDLADMADPPIVLSKGRWEGTPEENSRMVRCVLKLAGAGSVAFGVASEDKAEKFIYTHEHVWGDFKHYKIGDYDDIWEDEETRYHPHKCKYMITYTIPESEELLRRAPSNFAEATVDQAYSESRVIFGRMTNFLWALGKYICGGDCSNAHSIHTATAAWTGLSECSRMHQQTISSEFGNIMRQFCIWTDLPLAPTPPIDMGIMRYCLTCKKCADTCPSGAISHEDPTWERAFAPYCQEGVYDYDFSHAKCSQ\r\n>8657042VS | assession_no_1 | organism species |\r\nMEMNIYHSTISRRNFMKGLGLSGAALGAATASAPVFHDLDEMITSVPKSTTQHAWWVKERDYEDITTPVDWTVWSRREALKNPMPPGFAGNYVPKEQARLQSFRDEIKRGITEKIPGATLRDWALSEAGRSNTTSSSWMGLDVKPPWLWGEASALPVEPWPEGAPKWESTPEDNLRTVQAAGHYFGTPQVGAMEINEHMIRMFDKDGFEHNYSESYEKPMMRFRSEWFEDIPVGFQDANQVKHIPKSCKWAVTYIAAKENALQMTYGMRTGDPQDPWYKRIFPLGYTTGEAYSKADYVKVQFMKFIKMLGYQTYYMGLAGGTSSNSPAGVFSGLAEEARPALACSPYYGNAVRHIGIIVTDMPLSPTKPIDAGIVNFCKVCKKCAETCPSGAISMETEQQWEPACTGNNPGRKTWYLDWFKCRPWGSPYYCPNCQTVCPFNNPNKAIIHNAVRMTAATTPIFNSFFSSLDKSFGYAHQRSDEERLNWWYRDLNTWQYDDVFGMGTKDPKSWL", "nt_sequence"=>">8657036VS | assession_no_1 | organism species | \r\nATGGGGAAATTCCACTTAACATTATCCCGGCGTGATTTTATGAAATCACTAGGACTGGCTGGTGCGGGGCTAGCGACTGTAAAAGTAGGCACACCAGTATTTCACGATCTGGATGAGGTGATCTCAAATGAAAATTCTAACTGGAGACGCCCTTGGTGGGTAAAGGAGCGTGAGTTCGACAAACCCACTGTAGACGTTGATTGGGGTATTTACAAGCGGTTTGATAAGTTTACCTATGCGCCAGCGAATGCCAGAATTGCCATGTTTGGGCAGGAAGCTGTGATGAAGGCCAACCAGGACTGGAATAATCTGGTGGCCAAACGTCTTCAGGAAGACACAGCTGGCTTTACTATCCGTGACAGAGCAATGGACGAAGGGCTTTGCGAAGAGGGTATTAATGGTGGCTATCCTGCTCCGCGTACTGCCAGTCTGCCTCAAGATTTGGCGGATATGGCTGATCCACCCATTGTACTCTCGAAAGGGCGCTGGGAAGGCACACCTGAGGAAAATTCCCGCATGGTGCGTTGTGTACTCAAACTTGCGGGTGCAGGTAGTGTCGCCTTTGGTGTAGCTTCAGAAGATAAAGCAGAAAAATTTATCTATACCCATGAACATGTTTGGGGAGACTTCAAACACTACAAGATTGGTGATTATGACGATATCTGGGAAGATGAGGAGACACGCTATCACCCGCACAAATGTAAATATATGATAACCTATACTATTCCTGAATCTGAGGAGCTTCTACGTCGTGCGCCATCTAATTTTGCCGAGGCAACTGTAGATCAAGCGTATTCGGAATCCAGAGTAATTTTTGGCCGGATGACCAACTTCCTTTGGGCATTAGGTAAATATATCTGTGGTGGTGATTGTTCCAACGCGCATTCCATACATACTGCTACCGCTGCATGGACAGGCCTGAGTGAATGTAGCCGTATGCACCAGCAAACTATCTCCTCTGAGTTTGGCAATATTATGCGGCAATTTTGTATTTGGACAGATTTGCCGCTTGCACCTACTCCACCAATAGATATGGGTATTATGCGCTACTGCCTCACATGTAAAAAATGTGCCGATACTTGTCCCTCTGGTGCCATAAGCCACGAAGATCCAACCTGGGAAAGAGCTTTTGCTCCATACTGCCAGGAAGGTGTATATGATTATGATTTTAGTCATGCCAAGTGCTCTCAATTCTGGAAACAGAGTTCTTGGGGTTGCTCCATGTGCACTGGTTCCTGCCCCTTTGGCCATAAGAATTACGGTACTGTACACGATGTTATTTCAGCTACTGCTGCTGTAACTCCAATTTTCAACGGTTTCTTCCGGAATATGGATGACTTATTTGGCTATGGTAAGAATCCGGGCATGGAGTCATGGTGGGATCAGGAGCCTAGATATCGTGGTCTTTACCGTGAAATCTTTTAA\r\n>8657042VS | assession_no_1 | organism species |\r\nATGGAAATGAATATTTATCATTCAACTATTAGCAGGCGTAATTTCATGAAGGGGTTGGGATTGAGTGGTGCTGCTTTGGGTGCTGCAACAGCTTCAGCACCAGTATTTCATGATTTGGATGAAATGATTACATCTGTACCTAAATCTACAACTCAACATGCTTGGTGGGTAAAAGAAAGAGATTATGAGGATATTACTACGCCTGTTGATTGGACTGTTTGGTCACGACGTGAAGCCTTAAAGAATCCGATGCCCCCCGGTTTTGCAGGTAACTACGTACCCAAAGAGCAGGCAAGATTACAGAGTTTTCGGGATGAAATTAAAAGAGGTATAACTGAAAAAATTCCCGGTGCAACTTTGCGAGATTGGGCTCTATCGGAAGCAGGGCGAAGCAATACCACCTCTTCGTCATGGATGGGGCTTGATGTTAAACCCCCATGGTTATGGGGTGAAGCCTCTGCTTTACCGGTTGAACCCTGGCCAGAAGGTGCGCCAAAATGGGAATCTACTCCAGAAGATAACCTTAGAACGGTCCAAGCTGCCGGACATTATTTCGGTACGCCTCAGGTAGGTGCCATGGAAATCAATGAACATATGATTCGTATGTTCGATAAAGATGGTTTTGAACATAACTATAGTGAAAGTTATGAGAAACCCATGATGCGATTCCGCTCTGAGTGGTTTGAGGATATTCCGGTTGGTTTTCAGGATGCCAATCAGGTTAAACATATTCCAAAATCATGTAAATGGGCCGTTACTTATATTGCCGCCAAAGAAAATGCACTGCAGATGACTTATGGCATGCGCACTGGTGATCCTCAAGATCCTTGGTATAAGCGCATTTTCCCTCTGGGCTATACAACAGGAGAGGCTTATTCCAAAGCGGATTATGTTAAAGTCCAATTTATGAAATTCATAAAAATGCTGGGTTATCAAACTTATTACATGGGTTTAGCCGGTGGTACAAGTTCAAATAGTCCTGCAGGAGTTTTTTCAGGTTTGGCAGAAGAAGCTCGCCCAGCGCTAGCCTGCTCACCTTATTATGGCAATGCGGTACGTCATATCGGAATAATTGTTACTGATATGCCTCTGAGTCCTACTAAGCCTATCGATGCCGGTATTGTTAATTTTTGCAAAGTATGTAAAAAATGTGCAGAGACTTGCCCTTCCGGTGCTATTAGTATGGAAACTGAACAACAATGGGAACCTGCCTGCACGGGGAATAATCCCGGTCGAAAAACTTGGTATTTGGATTGGTTTAAATGTCGTCCATGGGGTTCCCCATATTATTGCCCCAATTGTCAAACAGTTTGCCCATTTAACAATCCTAACAAAGCAATTATCCATAACGCTGTACGTATGACGGCTGCTACCACTCCAATATTTAACAGCTTCTTTTCATCTTTGGATAAGAGCTTTGGTTATGCTCACCAGCGTTCGGACGAAGAGCGACTTAACTGGTGGTACAGGGATCTTAATACATGGCAATATGATGATGTTTTTGGTATGGGCACAAAAGATCCAAAATCTTGGTTATGA", "uploader_name"=>"xuan", "uploader_email"=>"danis.cao@hotmail.com"}
    
    submission_result = validation_submission(working_params)

    puts submission_result

  end
  
end























